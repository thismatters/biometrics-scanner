# biometrics-scanner
Gertboard + Raspberry Pi + pulsesensor

## Arduino
Hello, this project is intended to permit the use of a pulse sensor on the Raspberry Pi. I achieve this by way of the ATMega 328 (Arduino) chip that is included with the Gertboard. The [pulse sensor](http://pulsesensor.com) I'm designing around is an open source hardware project; I have found it to be exceptional. The jumping-off point for the Ardiuno code was provided by [WorldFamousElectronics](https://github.com/WorldFamousElectronics/PulseSensor_Amped_Arduino) here on Github. Their infrastructure for setting up the timers was a useful guide. However, the ATMega 328 on the Gertboard is clocked at 12MHz, so a slight modification was needed. Instead of using their algorithm for determining when a heartbeat has occurred I decided to implement the [Pan-Tompkins QRS Detection Algorithm](http://www.engr.wisc.edu/bme/faculty/tompkins_willis/Pan.pdf). I've taken some liberties with the RR Averages, but overall my implementation is true to the paper (note the errata at the end of the paper correcting some of the processing stages). The algorithm is more complicated and could be expanded to detect arrythmia and abnormal heartbeats, it also requires a lower sampling rate than the algorithm in the WorldFamousElectronics project (200Hz vs 500Hz). Just like the original code for the Arduino this project's Arduino code outputs processed data over the serial pipe. It passes all of the information needed to debug the QRS Detection Algorithm periodically (not at every sample). 

Apart from the pulse sensor this code will monitor the electro-dermal response by way of a simple voltage divider circuit attached by two electrodes to the subject. This signal is monitored by the Arduino and reported over the serial connection.

I'm using a Raspberry Pi 2 and Python (with matplotlib) to visualize the data either with a wxPython GUI or directly to a PNG file without the need for X11.

## Gertboard
Interfacing the Arduino on the Gertboard and the Raspberry Pi was easy when following [Gordon's superb guide](https://projects.drogon.net/raspberry-pi/gertboard/). Follow it completely. [Inotool](http://inotool.org/) has also made the development of this project much easier; their [tutorial is quite useful](http://inotool.org/quickstart) but it is lacking some useful information specific to the Gertboard. Namely, you will need set the correct serial port for communication with the ATMega, for me it was /dev/ttyAMA0. If you read the "Configuration Files" section of the Inotool guide you will know what to do with that. It goes without saying that the board model is "gert328". Attempting to upload your build to the ATMega without erasing it first has caused Inotool to fail, you can erase you ATMega with avrdude directly with `avrdude -p atmega328p -c gpio -e`.
